<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="css/prettify.css">
        <link rel="stylesheet" href="css/table.css">
        <script src="js/jquery-1.9.1.min.js"></script>
        <script src="js/angular.min.js"></script>
        <script src="js/ng-table.js"></script>
        <script src="js/google-code-prettify/prettify.js"></script>
    </head>
    <body ng-app="app" ng-controller="IndexCtrl">
        <div class="navbar">
          <div class="fill">
            <div class="container">
              <a href="/preview/twitter" class="navbar-brand">ngTable</a>
              <ul class="nav">
                <li><a href="https://github.com/esvit/ng-table">GitHub project</a></li>
              </ul>

              <div class="pull-right" style="padding: 12px 0;">
                <iframe width="100px" scrolling="0" height="20px" frameborder="0" allowtransparency="true" src="http://ghbtns.com/github-btn.html?user=esvit&amp;repo=ng-table&amp;type=watch&amp;count=true" class="github-btn"></iframe>
                <iframe width="102px" scrolling="0" height="20px" frameborder="0" allowtransparency="true" src="http://ghbtns.com/github-btn.html?user=esvit&amp;repo=ng-table&amp;type=fork&amp;count=true" class="github-btn"></iframe>
              </div>
            </div>
          </div>
        </div>

    
        <div class="row">
            <div class="col-span-3">
                <ul style="margin-top: 15px" class="nav nav-pills nav-stacked">
                    <li ng-class="{'active': demo == 1}"><a href="/">Demo #1: Simple table</a></li>
                    <li ng-class="{'active': demo == 2}"><a href="/demo2">Demo #2: Custom templates</a></li>
                </ul>
            </div>
            <div class="col-span-9" data-ng-view></div>
        </div>

        <script>
        var app = angular.module('app', ['ngTable']).
            config(function($interpolateProvider, $routeProvider, $locationProvider, $provide){
                $interpolateProvider.startSymbol('{[').endSymbol(']}'); // Twig noConflict

                $locationProvider.html5Mode(true).hashPrefix('!');
                $routeProvider
                    .when('/',      { demo: 1, templateUrl: '/views/demo1.html' })
                    .when('/demo2', { demo: 2, templateUrl: '/views/demo2.html' })
                    .otherwise({ redirectTo: '/' })
                ;

                var pulseElements = $(),
                    pulseColor = {r:0xE6, g:0xF0, b: 0xFF},
                    baseColor = {r:0x99, g:0xc2, b: 0xFF},
                    pulseDuration = 1000,
                    pulseDelay = 15000;

                function hex(number) {
                  return ('0' + Number(number).toString(16)).slice(-2);
                }

                jQuery.fn.pulse = function () {
                  pulseElements = pulseElements.add(this);
                };
                var lastPulse;

                function tick() {
                  var duration = new Date().getTime() - lastPulse,
                      index = duration * Math.PI / pulseDuration ,
                      level = Math.pow(Math.sin(index), 10),
                      color = {
                        r: Math.round(pulseColor.r * level + baseColor.r * (1 - level)),
                        g: Math.round(pulseColor.g * level + baseColor.g * (1 - level)),
                        b: Math.round(pulseColor.b * level + baseColor.b * (1 - level))
                      },
                      style = '#' + hex(color.r) + hex(color.g) + hex(color.b);

                  pulseElements.css('backgroundColor', style);
                  if (duration > pulseDuration) {
                    setTimeout(function() {
                      lastPulse = new Date().getTime();
                      tick();
                    }, pulseDelay);
                  } else {
                    setTimeout(tick, 50);
                  }
                }

                $provide.value('startPulse', function() {
                   setTimeout(function() {
                     lastPulse = new Date().getTime();
                     tick();
                   }, 2000);
                });
            })
            .directive('prettyprint', function() {
                return {restrict: 'C', link: function(scope, element) {
                    var code = prettyPrintOne(element.html(), undefined, true);
                    element.html(code);
                    element.find('code').pulse();
                }};
            })
            .controller('IndexCtrl', function($scope, $route, startPulse) {
                $scope.$on('$routeChangeSuccess', function () {
                    if ($route.current.$$route) {
                        $scope.demo = $route.current.$$route.demo;
                    }
                });
                startPulse();
            });
        </script>
    </body>
</html>