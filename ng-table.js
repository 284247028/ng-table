/*! ngTable v0.3.0 by Vitalii Savchuk(esvit666@gmail.com) - https://github.com/esvit/ng-table - New BSD License */
!function(a,b){return"function"==typeof define&&define.amd?(define("ngTable",["jquery","angular"],function(a,c){return b(c)}),void 0):b(a)}(angular||null,function(a){var b=a.module("ngTable",[]);b.factory("ngTableParams",function(){var b=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},c=function(c,d){var e={page:1,count:1,filter:{},sorting:{},group:{},groupBy:null},f={liveFiltering:!1,total:0,counts:[10,25,50,100]};return this.parameters=function(c,d){if(d=d||!1,a.isDefined(c)){for(var f in c){var g=c[f];if(d&&f.indexOf("[")>=0){for(var h=f.split(/\[(.*)\]/).reverse(),i="",j=0,k=h.length;k>j;j++){var l=h[j];if(""!==l){var m=g;g={},g[i=l]=b(m)?parseFloat(m):m}}"sorting"===i&&(e[i]={}),e[i]=a.extend(e[i]||{},g[i])}else e[f]=b(c[f])?parseFloat(c[f]):c[f]}return this}return e},this.settings=function(b){return a.isDefined(b)?(f=a.extend(f,b),this):f},this.page=function(a){return a?this.parameters({page:a}):e.page},this.filter=function(a){return a?this.parameters({filter:a}):e.filter},this.sorting=function(a){return a?this.parameters({sorting:a}):e.sorting},this.orderBy=function(){var a=[];for(var b in e.sorting)a.push(("asc"===e.sorting[b]?"+":"-")+b);return a},this.getData=function(){return[]},this.getGroups=function(a){data=this.getData(e);var b={};for(var c in data){var d=data[c];b[d[a]]=b[d[a]]||{data:[]},b[d[a]].value=d[a],b[d[a]].data.push(d)}var f=[];for(var g in b)f.push(b[g]);return f},this.generatePagesArray=function(a,b,c){var d,e,f,g,h,j;if(d=11,j=[],h=Math.ceil(b/c),h>1){for(j.push({type:"prev",number:Math.max(1,a-1),active:a>1}),j.push({type:"first",number:1,active:a>1}),f=Math.round((d-5)/2),g=Math.max(2,a-f),e=Math.min(h-1,a+2*f-(a-g)),g=Math.max(2,g-(2*f-(e-g))),i=g;e>=i;)i===g&&2!==i||i===e&&i!==h-1?j.push({type:"more",active:!1}):j.push({type:"page",number:i,active:a!==i}),i++;j.push({type:"last",number:h,active:a!==h}),j.push({type:"next",number:Math.min(h,a+1),active:h>a})}return j},this.url=function(b){b=b||!1;var c=b?[]:{};for(key in e)if(e.hasOwnProperty(key)){var d=e[key],f=encodeURIComponent(key);if("object"==typeof d){for(var g in d)if(!a.isUndefined(d[g])&&""!==d[g]){var h=f+"["+encodeURIComponent(g)+"]";b?c.push(h+"="+encodeURIComponent(d[g])):c[h]=encodeURIComponent(d[g])}}else a.isFunction(d)||a.isUndefined(d)||""===d||(b?c.push(f+"="+encodeURIComponent(d)):c[f]=encodeURIComponent(d))}return c},this.settings(d),this.parameters(c,!0),this};return c});var c=["$scope","ngTableParams",function(b,c){var d=function(d){d=a.extend(b.params,d),b.$groups=b.params.getGroups(b.params.settings().groupBy),b.paramsModel&&b.paramsModel.assign(b.$parent,new c(d)),b.params=a.copy(d)};b.params=b.params||{page:1,count:10},b.$watch("params.filter",function(a){b.params.$liveFiltering&&(d({filter:a}),b.goToPage(1))},!0),b.$watch("params.sorting",function(a){d({sorting:a})},!0),b.goToPage=function(a){a>0&&b.params.page!==a&&b.params.count*(a-1)<=b.params.total&&d({page:a})},b.changeCount=function(a){d({page:1,count:a})},b.doFilter=function(){d({page:1})},b.sortBy=function(a){var c,e;a.sortable&&(c=b.params.sorting&&b.params.sorting[a.sortable]&&"desc"===b.params.sorting[a.sortable],e={},e[a.sortable]=c?"asc":"desc",d({sorting:e}))}}];return b.directive("ngTable",["$compile","$q","$parse",function(b,d,e){"use strict";var f={restrict:"A",priority:1001,scope:!0,controller:c,compile:function(c){c.clone();var d,f;return f=0,d=[],a.forEach(c.find("tr:not(.ng-table-group)").eq(0).find("td"),function(b){var c=a.element(b);if(!c.attr("ignore-cell")||"true"!==c.attr("ignore-cell")){var g=function(a){return e(c.attr("x-data-title")||c.attr("data-title")||c.attr("title"))(a,{$columns:d})||" "};c.attr("data-title-text",g());var h=function(a){return e(c.attr("x-data-header")||c.attr("data-header")||c.attr("header"))(a,{$columns:d})||!1},i=c.attr("filter")?e(c.attr("filter"))():!1,j=!1;i&&i.templateURL&&(j=i.templateURL,delete i.templateURL),d.push({id:f++,title:g,sortable:c.attr("sortable")?c.attr("sortable"):!1,filter:i,filterTemplateURL:j,headerTemplateURL:h,filterData:c.attr("filter-data")?c.attr("filter-data"):null,show:c.attr("ng-show")?function(a){return e(c.attr("ng-show"))(a)}:function(){return!0}})}}),function(c,f,g){if(c.columns=d,c.$parent.$watch(g.ngTable,function(b){a.isUndefined(b)||(c.paramsModel=e(g.ngTable),c.pages=b.generatePagesArray(b.page(),b.settings().total,b.parameters().count),c.params=a.copy(b))},!0),c.parse=function(a){return a(c)},g.showFilter&&c.$parent.$watch(g.showFilter,function(a){c.show_filter=a}),a.forEach(d,function(b){var d;if(b.filterData){if(d=e(b.filterData)(c,{$column:b}),!a.isObject(d)||!a.isObject(d.promise))throw new Error("Function "+b.filterData+" must be instance of $q.defer()");return delete b.filterData,d.promise.then(function(c){a.isArray(c)||(c=[]),c.unshift({title:"-",id:""}),b.data=c})}}),!f.hasClass("ng-table")){c.templates={header:g.templateHeader?g.templateHeader:"ng-table/header.html",pagination:g.templatePagination?g.templatePagination:"ng-table/pager.html"};var h=b('<thead ng-include="templates.header"></thead>')(c),i=b('<div ng-include="templates.pagination"></div>')(c);f.find("thead").remove();var j=f.find("tbody");return j[0]?a.element(j[0]).before(h):f.prepend(h),f.addClass("ng-table"),f.after(i)}}},link:function(){console.info(tableElement)}};return f}]),b});
//# sourceMappingURL=ng-table.map